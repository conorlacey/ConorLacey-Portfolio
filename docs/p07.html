<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Portfolio 7</title>

<script src="site_libs/header-attrs-2.20/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Portfolio</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="p01.html">Portfolio 1</a>
</li>
<li>
  <a href="p02.html">Portfolio 2</a>
</li>
<li>
  <a href="p03.html">Portfolio 3</a>
</li>
<li>
  <a href="p04.html">Portfolio 4</a>
</li>
<li>
  <a href="p05.html">Portfolio 5</a>
</li>
<li>
  <a href="p06.html">Portfolio 6</a>
</li>
<li>
  <a href="p07.html">Portfolio 7</a>
</li>
<li>
  <a href="p08.html">Portfolio 8</a>
</li>
<li>
  <a href="p09.html">Portfolio 9</a>
</li>
<li>
  <a href="p10.html">Portfolio 10</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Portfolio 7</h1>

</div>


<pre class="r"><code>suppressWarnings(library(tidyverse))</code></pre>
<pre><code>## â”€â”€ Attaching core tidyverse packages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse 2.0.0 â”€â”€
## âœ” dplyr     1.1.0     âœ” readr     2.1.4
## âœ” forcats   1.0.0     âœ” stringr   1.5.0
## âœ” ggplot2   3.4.1     âœ” tibble    3.2.1
## âœ” lubridate 1.9.2     âœ” tidyr     1.3.0
## âœ” purrr     1.0.1     
## â”€â”€ Conflicts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse_conflicts() â”€â”€
## âœ– dplyr::filter() masks stats::filter()
## âœ– dplyr::lag()    masks stats::lag()
## â„¹ Use the ]8;;http://conflicted.r-lib.org/conflicted package]8;; to force all conflicts to become errors</code></pre>
<div id="introduction" class="section level3">
<h3>Introduction</h3>
<p>In this portfolio I am going to be trying out gganimate! In
presenting for SAM I felt it would be helpful to animate some Bayesian
concepts. More specifically I hope to animate how prior information
updates your posterior distribution so as to get closer to the
truth.</p>
</div>
<div id="gganimate-libraries" class="section level3">
<h3>gganimate Libraries</h3>
<p>First letâ€™s load the appropriate libraries</p>
<pre class="r"><code>library(gganimate)</code></pre>
<pre><code>## Warning: package &#39;gganimate&#39; was built under R version 4.1.2</code></pre>
<pre class="r"><code>library(transformr)</code></pre>
<pre><code>## Warning: package &#39;transformr&#39; was built under R version 4.1.2</code></pre>
<p>gganimate is the primary package that will make it user friendly to
code a moving graph, however I also need to the transformr package
because this allows for interpolation between data points (i.e., this
will make the graph movement smooth)</p>
</div>
<div id="normal-distribution" class="section level3">
<h3>Normal Distribution</h3>
<p>Now letâ€™s make normal distribution centered at 0 and with an SD of
1.</p>
<pre class="r"><code>x &lt;- seq(-4,4, length.out = 1e4)
y &lt;- dnorm(x, mean = 0, sd = 1)
dat &lt;- tibble(x = x, y = y)

dat %&gt;% ggplot(aes(x = x, y = y)) +
  geom_line(alpha=0.5, linewidth = 2, color = &quot;#4169E1&quot;) +
  labs(title = &quot;Normal Distribution&quot;,
       y = &quot;Density&quot;)</code></pre>
<p><img src="p07_files/figure-html/normal%20distribution-1.png" width="672" /></p>
<p>We should also make the normal distribution that we would like the
previous above distribution to shift to.</p>
<pre class="r"><code>x &lt;- seq(-4,4, length.out = 1e4)
y &lt;- dnorm(x, mean = 2, sd = .5)
dat &lt;- tibble(x = x, y = y)

dat %&gt;% ggplot(aes(x = x, y = y)) +
  geom_line(alpha=0.5, linewidth = 2, color = &quot;#4169E1&quot;) +
  labs(title = &quot;Normal Distribution&quot;,
       y = &quot;Density&quot;)</code></pre>
<p><img src="p07_files/figure-html/new%20normal-1.png" width="672" /></p>
</div>
<div id="gganimate-a-rookie-mistake" class="section level3">
<h3>gganimate (A rookie mistake)</h3>
<p>Alright well now this should be simple right? Letâ€™s just code these
two graphs so that there is a transition between the two using
gganimate.</p>
<pre class="r"><code>prior &lt;- tibble(x = seq(-4,4, length.out = 1e4),
                y = dnorm(x, mean = 0, sd = 1),
                group =1)

post &lt;-  tibble(x = seq(-4,4, length.out = 1e4),
                y = dnorm(x, mean = 2, sd = .5),
                group =2)

prior_post &lt;- bind_rows(prior,post)

prior_post %&gt;% ggplot(aes(x=x, y=y)) + 
  geom_line(alpha=0.5, linewidth = 2, color = &quot;#4169E1&quot;) +
  #Animation
  labs (x = &quot;dMACS&quot;,
        y = &quot;Density&quot;) + 
  transition_time(group) + 
  ease_aes(&#39;linear&#39;)</code></pre>
<p><img
src="p07_files/figure-html/gganimate%20rookie-1.gif" /><!-- --></p>
<p>Well this isnâ€™t quite what we are looking forâ€¦ I mean yes, itâ€™s
changing from the prior to the posterior distribution, but itâ€™s not
shifting.</p>
<p>The root of the problem comes from the group variable. Yes, these
distributions are different types and hence should be put in different
groups. However, the way gganimate works is that it is using this
grouping variable as its indicator for what frames to shift between. If
we only have two frames, then itâ€™s going to shift between these two
groups directly, which wonâ€™t look very smooth. Therefore, to make this
smoother we need more frames or groups of normal distributions that are
incrementally increasing to a mean of 2 and decreasing to a sd of 0.5.
To simplify the coding of this further I will now call the group
variable frames.</p>
</div>
<div id="gganimate-the-eliquent-way" class="section level3">
<h3>gganimate (The eliquent way)</h3>
<pre class="r"><code>a &lt;- seq(0, 2, length = 100)
b &lt;- seq(1, .5, length = 100)</code></pre>
<p>The a and b vectors will specify how we want the distribution to
incrementally change.</p>
<p>Now letâ€™s create a for loop to create these distributions frame by
frame. We will make it so that there are 100 frames of normal
distributions that are increasing from a mean of 0 to a mean 2 and
decreasing from a sd of 1 to an sd of 0.5.</p>
<pre class="r"><code>prior_post&lt;- tibble(x = 0, y = 0, frame = 0)
for (i in 1:100){
x&lt;-seq(-4,4, length.out = 1e4)
y&lt;-dnorm(x, a[i], b[i])
y&lt;-y/max(y)*(.5)
dat &lt;- tibble(x = x, y = y, frame = i)
prior_post &lt;- bind_rows(prior_post, dat)
}
prior_post &lt;- prior_post[-1,]</code></pre>
<p>Lastly, letâ€™s animate it!</p>
<pre class="r"><code>prior_post %&gt;% ggplot(aes(x=x, y=y)) + 
  geom_line(alpha=0.5, linewidth = 2, color = &quot;#4169E1&quot;) +
  #Animation
  labs (x = &quot;dMACS&quot;,
        y = &quot;Density&quot;) + 
  transition_time(frame) + 
  ease_aes(&#39;linear&#39;)</code></pre>
<p><img src="p07_files/figure-html/animate!-1.gif" /><!-- --></p>
<p>Nice! This is very smooth. Now how about we add some more information
on this graph. Specifically letâ€™s add a marker for where the true value
is in the population as well as the percent of prior knowledge to
represent how increasing your prior knowledge gets to you closer to the
truth.</p>
<pre class="r"><code>prior_post %&gt;% ggplot(aes(x=x, y=y)) + 
  geom_line(alpha=0.5, linewidth = 2, color = &quot;#4169E1&quot;) +
  geom_vline(xintercept = 2) +
    annotate(&quot;text&quot;, x = 2, y = -.06, label = &quot;True Value&quot;) +
  coord_cartesian(ylim = c(0,.5), clip = &quot;off&quot;) +
  #Animation
  labs (title = &quot;Amount of Prior Knowledge = {frame_time}%&quot;,
   #     subtitle =&quot;                                                                                                True Value&quot;,
        x = &quot;dMACS&quot;,
        y = &quot;Density&quot;) + 
  
  transition_time(frame) + 
  ease_aes(&#39;linear&#39;)</code></pre>
<p><img src="p07_files/figure-html/more%20info-1.gif" /><!-- --></p>
<p>And there we have it!</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
